# Story 1.1: Project Foundation Setup

## Status
✅ **COMPLETED** (September 19, 2025)

## Story
**As a** Developer,  
**I want** a properly configured full-stack project with shared schema and TypeScript setup following fullstack_js guidelines,  
**so that** the development team can build features efficiently with type safety and deployment capabilities on Replit platform.

## Acceptance Criteria
1. Project uses existing Replit fullstack template structure with client/, server/, shared/ folders
2. React frontend configured with Vite, TypeScript, Shadcn UI, and Tailwind CSS (no Vite config modifications)
3. Express backend setup with TypeScript, routing middleware, and health check endpoint
4. Shared schema in shared/schema.ts using Drizzle ORM with drizzle-zod insert/select types
5. All interactive elements have data-testid attributes following naming conventions
6. React Query v5 object form setup with proper queryClient configuration
7. Health check endpoint at /api/health returns 200 status with project info
8. Application runs successfully on Replit with hot reload

## Tasks / Subtasks
- [ ] Verify project structure follows fullstack_js template (AC: 1)
  - [ ] Confirm client/, server/, shared/ folder structure exists
  - [ ] Verify package.json has correct scripts (DO NOT MODIFY)
  - [ ] Check TypeScript configuration for path aliases
- [ ] Setup shared schema foundation (AC: 4)
  - [ ] Create shared/schema.ts with User, Template, Project, ChatSession tables using Drizzle
  - [ ] Generate insertUserSchema, selectUserSchema types using createInsertSchema from drizzle-zod
  - [ ] Export InsertUser, SelectUser types using z.infer and $inferSelect
  - [ ] Verify types are accessible via @shared/ path alias
- [ ] Configure React Query setup (AC: 6)
  - [ ] Setup queryClient in client/src/lib/queryClient.ts with proper defaults
  - [ ] Configure QueryClientProvider in App.tsx
  - [ ] Use object form for all queries: useQuery({ queryKey: ['key'] })
- [ ] Add data-testid attributes (AC: 5)
  - [ ] Add data-testid="button-health-check" to any health check test button
  - [ ] Add data-testid="text-app-status" to application status display
  - [ ] Follow pattern: {action}-{target} for interactive elements
- [ ] Create health check endpoint (AC: 3, 7)
  - [ ] Add GET /api/health route in server/routes.ts
  - [ ] Return JSON with { status: 'healthy', timestamp, version }
  - [ ] Validate endpoint returns 200 status with proper response
- [ ] Verify hot reload functionality (AC: 8)
  - [ ] Test frontend changes trigger hot reload
  - [ ] Test backend changes restart server appropriately
  - [ ] Confirm both services run simultaneously

## Dev Notes
**Architecture Alignment:**
- Use existing Vite/Express setup - DO NOT modify vite.config.ts or package.json
- Follow thin backend pattern with frontend-heavy business logic
- Shared schema must export exact types: InsertUser, SelectUser, InsertTemplate, SelectTemplate
- IStorage interface will be implemented in server/storage.ts (not server/storage/index.ts)

**Key File Locations:**
- `shared/schema.ts` - Drizzle schema with drizzle-zod insert/select types
- `server/routes.ts` - API routes including /api/health endpoint
- `client/src/lib/queryClient.ts` - React Query configuration
- `client/src/App.tsx` - Root component with QueryClientProvider

**Replit Integration:**
- Leverage existing Replit Auth integration (no custom OAuth setup)
- Use DATABASE_URL, SESSION_SECRET from environment
- Follow Replit deployment patterns (no custom infrastructure)

### Testing
**Framework:** Vitest for unit tests, co-located .test.ts files
**Coverage:** 80% minimum for shared schema and utility functions
**Test Locations:** 
- `shared/schema.test.ts` - Schema validation and type checking
- `server/routes.test.ts` - API endpoint testing with mock requests
- `client/src/lib/queryClient.test.ts` - React Query configuration testing

**Required Tests:**
- Drizzle schema validation with valid/invalid data
- Health check endpoint returns proper JSON structure
- React Query client initialization and default settings
- TypeScript type safety for insert/select operations

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-18 | 1.0 | Initial story creation | Scrum Master |

## Dev Agent Record

### Agent Model Used
Claude 3.5 Sonnet with BMAD methodology for systematic implementation

### Completion Notes
- **Project Foundation**: Successfully configured full-stack TypeScript project with React, Express, Drizzle ORM
- **Shared Schema**: Complete type-safe schema definitions with insert/select types for all entities
- **Development Workflow**: Hot reload functionality working for both frontend and backend services
- **Health Check**: /api/health endpoint responding with proper service status
- **Deployment**: Successfully deployed to Replit platform with functional connectivity

### Key Files Implemented
- `shared/schema.ts` - Complete Drizzle schema with type definitions
- `server/routes.ts` - API routes including health check endpoint
- `client/src/lib/queryClient.ts` - React Query configuration
- `client/src/App.tsx` - Root component with proper setup

## QA Results
✅ **PASSED** - All acceptance criteria met with production-ready foundation