
---
story_id: 10.2.7
epic_id: 10.2
title: "Build Core Business Intelligence UI"
status: "Draft"
priority: "P1 (High - Unblocks Analytics usability)"
estimate: "13 story points"
dev_agent: "unassigned"
---

# Story 10.2.7: Build Core Business Intelligence UI

**As a** Business Analyst,
**I want** a dashboard to view unified analytics and make natural language queries,
**so that** I can gain insights into business performance.

## Story Overview

This story creates the user interface for the Business Intelligence system. It involves building a dashboard to display unified analytics, render dashboards, and allow users to submit natural language queries. This UI will consume the endpoints from the Business Intelligence API (Story 10.2.5).

## Acceptance Criteria

- [ ] A new page is created at `client/src/pages/bi-dashboard.tsx`.
- [ ] The page provides an interface to display unified analytics from the `GET /api/bi/analytics` endpoint.
- [ ] The page includes a text input for users to submit natural language queries to the `POST /api/bi/query` endpoint and display the results.
- [ ] The UI can render dashboards fetched from the `GET /api/bi/dashboards/:id` endpoint.
- [ ] The UI is built using `Shadcn UI` and `Tailwind CSS`.
- [ ] State management is handled by `React Query`.

## Tasks / Subtasks

- [ ] **Task 1: Set up BI Page and Routing**
    - [ ] Create `client/src/pages/bi-dashboard.tsx`.
    - [ ] Add a route (e.g., `/bi`) to the page.

- [ ] **Task 2: Build Unified Analytics View**
    - [ ] Create components to display the metrics from the `getUnifiedAnalytics` service call.
    - [ ] Use `React Query` to fetch the data.

- [ ] **Task 3: Build Natural Language Query Interface**
    - [ ] Create a component with a text input for queries.
    - [ ] Use `React Query`'s `useMutation` hook to post the query to `POST /api/bi/query`.
    - [ ] Create components to display the results, including any visualizations.

- [ ] **Task 4: Build Dashboard Rendering**
    - [ ] Create a dynamic component that can render a dashboard layout with widgets based on the data from `GET /api/bi/dashboards/:id`.

## Dev Notes

-   **Tech Stack**: React, Vite, Shadcn UI, Tailwind CSS, React Query, Wouter.
-   **API Endpoints**: This story consumes the endpoints defined in story `10.2.5`.
-   **Mobile UI**: The architect noted the existence of `client/src/components/MobileOptimizedAnalytics.tsx`. Review this file for mobile styling and logic.

### Testing
-   **Testing Strategy**: Component tests are required for the new UI components.
-   **Guidance**: Write component tests for the main components (e.g., Analytics View, NLQ Input). Use a library like `msw` (Mock Service Worker) to mock the API responses from story 10.2.5 to test how the components handle loading, success, and error states.

## Change Log

| Date       | Version | Description                 | Author       |
|------------|---------|-----------------------------|--------------|
| 2025-09-21 | 1.0     | Initial draft of UI story.  | Bob (Scrum Master) |
